# 데이터 수집 및 저장 수집 데이터 보고서



## 1. 수집 데이터 개요 (세분화)

| 데이터명        | 수집 대상                                           | 수집 목적                                | 사용 예정 기능                               | 출처/저작권                                 |
| ----------- | ----------------------------------------------- | ------------------------------------ | -------------------------------------- | -------------------------------------- |
| **사내규정 문서** | `/사내규정/` 디렉토리 내 약 60개 PDF 파일                    | 조직 내부 규정, 업무 처리 기준 파악 및 사내 업무 자동화 대응 | 문서 요약, 키워드 검색, 문맥 기반 질의응답, 규정 간 연관성 분석 | 한국방송광고진흥공사 내부 문서 (비공개)                 |
| **법령 문서**   | `/법령/` 디렉토리 내 공공법령 PDF 및 HWP 파일 약 24건           | 사내 규정과 관련된 국가 법령의 준거 정보 확보           | 사내규정과 법령 간 연결 그래프 구성, 법적 근거 자동 추출      | 대한민국 법제처, 고용노동부 등 공공기관 (공공저작물 자유이용 허용) |
| **내부운영 문서** | `/내부문서/` 하위 디렉토리 (투자, 사업, 평가 등) 내 PDF/HWP 약 30건 | 조직 운영 현황, 재무, 복지, 노조 등 실제 적용 사례 확보   | 사내규정 반영 여부 분석, 문서 요약, 운영지침 기반 QA       | 한국방송광고진흥공사 내부 문서 (비공개)                 |
| **관계법령 문서** | `/관계법령/` 디렉토리 내 방송 및 공공기관 관련 법령 PDF 6건          | 사내 규정/운영이 따르는 외부 정책·법령과의 연계 구조 확보    | 문서 검색, 관계 추론, 규정 대비 기준 확인 기능           | 방송통신위원회 등 정부 발간 공공문서 (공공저작물 자유이용 허용)   |

---

### 🔹 목적별 정리

| 분류        | 주요 문서 예시                     | 사용 목적                  |
| --------- | ---------------------------- | ---------------------- |
| **규정 기반** | `인사규정`, `여비규정`, `복무규정` 등     | 사내 정책 검색, 요약, 질의응답 자동화 |
| **법령 연동** | `근로기준법`, `방송법`, `개인정보보호법` 등  | 내부 문서와 외부 기준의 연결 고리 제공 |
| **운영 실태** | `투자현황`, `주요사업`, `복지제도` 등     | 실제 적용 상황과 규정 일치 여부 비교  |
| **정책 추론** | `청렴옴부즈만 규정`, `고정자산 운영관리규정` 등 | 정책 간 연관 추론 (GraphRAG)  |

---

## 2. 수집 방법 및 자동화 절차

* **수집 방식 (해당 항목에 체크)**

  * [ ] 웹 크롤링
  * [ ] API 호출
  * [ ] 사용자 입력
  * [x] **문서 파일 업로드 (PDF, HWP 등)**
  * [ ] 기타: 내부 네트워크 공유 폴더 수동 수집

* **수집 도구 또는 스크립트 설명**:

  * 디렉토리 구조 기반 자동 탐색 및 메타데이터 수집
  * PDF 추출(`PyMuPDF`, `pdfminer.six`), HWP 추출(`python-hwp`) 후 chunking 및 저장
  * 파일명 기반 문서 제목, 버전(제정/개정), 날짜 메타 정보 추출 자동화

* **사용한 언어/라이브러리**:

  * `Python + os, re, PyMuPDF, pdfminer.six, python-hwp, tqdm, langchain`

* **자동화 여부 및 주기**:

  * 수집 자동화 1회성 수행 후 변경 발생 시 수동 보완

* **오류 발생 시 예외 처리 전략**:

  * PDF 추출 실패 시 로그 기록 및 재시도
  * HWP 파일은 OCR 또는 수동 추출 대상 목록으로 큐에 저장
  * 파일명 불일치/누락 → `invalid_files/` 디렉토리에 이동 및 보고

* **예시 스크립트 또는 흐름도 (요약)**:

```plaintext
1. 루트 디렉토리 재귀 순회
2. 각 문서의 메타데이터(파일명, 폴더, 날짜 등) 저장
3. 문서 유형별 텍스트 추출
4. 규칙 기반으로 chunk 분할
5. vectorization → graph node/edge 생성
6. 저장 및 로그 기록
```

---

## 3. 데이터 설명 및 구성

### 4.1 파일 및 필드 설명

| 파일명 또는 테이블명           | 필드명           | 데이터 타입 | 설명          | 예시                              |
| --------------------- | ------------- | ------ | ----------- | ------------------------------- |
| `regulation_docs.csv` | `filename`    | string | 원본 파일명      | `휴가나눔제도 운영지침(2025년도 7월 제정).pdf` |
|                       | `category`    | string | 상위 디렉토리     | `사내규정`                          |
|                       | `title`       | string | 규정/지침/법명    | `휴가나눔제도 운영지침`                   |
|                       | `date`        | date   | 제정/개정일자     | `2025-07`                       |
|                       | `version`     | string | 제정 or 개정 여부 | `제정`                            |
|                       | `content`     | text   | 전체 본문       | "제1조 목적은..."                    |
|                       | `chunk_index` | int    | 청크 번호       | 0, 1, 2...                      |
|                       | `chunk_text`  | text   | 문서의 분할 텍스트  | "제2조 이 지침은..."                  |

### 4.2 데이터 양

* **전체 수집 데이터 건수**: 약 100개 문서 (PDF/HWP 기준)
* **추출된 고품질 데이터 건수 (chunk 단위)**: 약 3,000~~5,000건 (예상 chunk 크기 500~~800 tokens 기준)

### 4.3 저장 위치 및 포맷

* **저장 경로**: `/data/regulations/raw/`, `/data/regulations/processed/`
* **저장 포맷**: CSV (메타), JSON (본문), Vector DB (임베딩), 기타: `Graph JSON`, `Neo4j Graph`
* **인코딩**: UTF-8

---

## 5. 법적·윤리적 검토

* **개인정보 포함 여부**:

  * [ ] 포함  \[x] **미포함**
  * 포함된 경우 필드: 해당 없음 (규정/법령성 문서만 포함)

* **비식별화 조치 여부**:

  * 이름 마스킹  \[ ] 고유키 대체  \[ ] 기타: 해당 없음

* **출처 및 사용권**:

  * 내부 생성 또는 공공 데이터 활용 (법령 포함 시 공공저작물 자유이용 허용 규정 적용)

* **공개 여부**:

  * [ ] 공개  \[x] **내부사용 한정**

* **라이선스 또는 약관 검토 여부**:

  * 내부문서 및 법령 기반 문서는 별도 저작권 검토 필요 없음
  * \[검토자] 김지민 / \[검토일자] 2025-07-29

---

## 6. 데이터 품질 및 정합성 관리 방안

* **중복 제거 기준**:

  * `title + version + date` 기준으로 중복 규정 제거

* **정합성 검증 방법**:

  * 날짜 형식 정규식 검증 (YYYY-MM-DD 또는 YYYY년도 MM월)
  * content 추출 실패 시 누락 로그 기록

* **Null 처리 및 결측치 전략**:

  * 내용 미추출 문서는 `chunk_text = NULL`로 저장 후 큐 등록

* **표준화 전략**:

  * 문서 제목 소문자/띄어쓰기 정규화
  * 텍스트 전처리: 특수문자 제거, 공백 정리, OCR 텍스트 보정

---

## 7. 변경 이력 및 보완 내역

| 변경일        | 변경자  | 변경 내용                      | 비고                         |
| ---------- | ---- | -------------------------- | -------------------------- |
| 2025-07-28 | 우지훈 | 문서 추출 스크립트에 HWP 처리 로직 추가   | 한글 문서 포함 대응                |
| 2025-07-29 | 이명인  | 메타데이터 스키마 확정 및 저장 경로 설정    | `/data/regulations/` 구조 반영 |
| 2025-07-29 | 남궁건우  | GraphRAG 노드/엣지 생성 로직 구현 완료 | LangChain 적용 예정            |

---
